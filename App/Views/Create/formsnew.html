{% extends 'base.html' %}

{% block title %}New-User{% endblock %}

{% block body %}
    {% if user.errors is not empty %}
        <p>Errors:</p>
        <ul>
            {% for error in user.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method="post" action="/create/formFill" id="formCreate">

        <input type='hidden' name='username' value='{{ current_user.name }}'/>

        <fieldset>
            <legend><span style="color: #00008B;"><i>New User Details</i></span></legend>
            <div class="form-group row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="Name">Name</label>
                        <input type="text" id="username" name="username" autofocus value="{{ user.username }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="ICNo">IC No</label>
                        <input id="ICNo" name="ICNo" autofocus value="{{ user.ICNo }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="Desig">Designation</label>
                        <input id="Designation" name="Designation" autofocus value="{{ user.UserIP }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="Category1">Type of TC Usage</label>
                        <select id="tcUsage" required name="tcUsage" placeholder="Select">
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="Project">Project</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="section">Section</label>
                        <input id="section" name="section" autofocus value="{{ user.section }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="division">Division</label>
                        <input id="division" name="division" autofocus value="{{ user.division }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="grp">Group</label>
                        <input id="grp" name="grp" autofocus value="{{ user.grp }}" required class="form-control"/>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="Category2">PC Category</label>
                        <select id="pcCategory" required name="pcCategory" placeholder="Select">
                            <option value="New">New</option>
                            <option value="Replacement">Replacement</option>
                        </select>
                    </div>
                </div>
                
                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="details">Details of Old PC</label>
                        <input id="details" name="details" autofocus value="{{ user.division }}" required class="form-control" disabled/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="VMIP">VMIP</label>
                        <input id="VMIP" name="VMIP" autofocus value="{{ user.grp }}" required class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-group">
                        <label for="PhoneNo">PhoneNo</label>
                        <input id="PhoneNo" name="PhoneNo" autofocus value="{{ user.grp }}" required class="form-control"/>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-xs-6">
                    <div class="form-group">
                        <label for="EMail">Mail ID</label>
                        <input id="EMail" type="email" name="EMail" autofocus value="{{ user.EMail }}" class="form-control"/>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="form-group">
                        <label for="Remarks">Remarks</label>
                        <input id="Remarks" name="Remarks" autofocus value="{{ user.ContactNo }}" class="form-control"/>
                    </div>
                </div>  
            </div>

            <div class="form-group text-center">
                <button type="submit" class="btn btn-default">Submit</button>
            </div>
        </fieldset>
    </form>

    <script>
        // Function to enable/disable "Details of Old PC" based on selected PC Category
        document.getElementById('pcCategory').addEventListener('change', function() {
            var detailsInput = document.getElementById('details');
            if (this.value === 'Replacement') {
                detailsInput.removeAttribute('disabled');
            } else {
                detailsInput.setAttribute('disabled', 'disabled');
            }
        });
    </script>
</body>
{% endblock %}

